<div class="container">
  <div *ngIf="formSubmitted && !profileForm.valid" class="error-message">
    Please fix the highlighted fields. Some data is missing or incorrectly formatted.
  </div>

  <h2 mat-dialog-title>Edit Profile</h2>
  <div mat-dialog-content>
    <form #profileForm="ngForm" (ngSubmit)="onSave(profileForm)">

      <mat-form-field appearance="fill" class="full-width">
        <mat-label>Email</mat-label>
        <input
          matInput
          name="email"
          [(ngModel)]="data.email"
          required
          email
          #email="ngModel"
        />
      </mat-form-field>

      <mat-form-field appearance="fill" class="full-width">
        <mat-label>Phone</mat-label>
        <input
          matInput
          name="phone"
          [(ngModel)]="data.phone"
          required
          pattern="^\+?\d{7,15}$"
          #phone="ngModel"
        />
      </mat-form-field>

      <mat-form-field appearance="fill" class="full-width">
        <mat-label>Address</mat-label>
        <input
          matInput
          name="address"
          [(ngModel)]="data.address"
          required
          #address="ngModel"
        />
      </mat-form-field>

      <mat-form-field appearance="fill" class="full-width">
        <mat-label>City</mat-label>
        <input
          matInput
          name="city"
          [(ngModel)]="data.city"
          required
          #city="ngModel"
        />
      </mat-form-field>

      <mat-form-field appearance="fill" class="full-width">
        <mat-label>Date of Birth</mat-label>
        <input
          matInput
          name="dob"
          [(ngModel)]="data.dob"
          required
          pattern="^\d{4}-\d{2}-\d{2}$"
          #dob="ngModel"
          placeholder="YYYY-MM-DD"
        />
      </mat-form-field>

      <mat-form-field appearance="fill" class="full-width">
        <mat-label>Gender</mat-label>
        <input
          matInput
          name="gender"
          [(ngModel)]="data.gender"
          required
          #gender="ngModel"
        />
      </mat-form-field>

      <mat-form-field appearance="fill" class="full-width">
        <mat-label>Blood Group</mat-label>
        <input
          matInput
          name="blood_group"
          [(ngModel)]="data.blood_group"
          required
          pattern="^(A|B|AB|O)[+-]$"
          #blood_group="ngModel"
          placeholder="A+, O-, B+ itd."
        />
      </mat-form-field>

      <div mat-dialog-actions align="end">
        <button mat-button type="button" (click)="onCancel()">Cancel</button>
        <button mat-raised-button color="primary" type="submit">Save</button>
      </div>
    </form>
  </div>
</div>
